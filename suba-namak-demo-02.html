<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>සුබ නම් තැබීම | Astro Jayamaga</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gemunu+Libre:wght@700&family=Noto+Serif+Sinhala:wght@400;500;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        :root {
            --primary-color: #7F0000; /* Maroon */
            --primary-light: #a33333;
            --secondary-color: #FDF5E6; /* Cream */
            --accent-color: #FFA500; /* Orange */
            --text-color: #333333;
            --white: #ffffff;
            --border-color: #d4a373;
            --success-color: #155724;
            --success-bg: #d4edda;
            --error-color: #721c24;
            --error-bg: #f8d7da;
            --shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        * {
            box-sizing: border-box;
            outline: none;
        }

        body {
            font-family: 'Noto Serif Sinhala', serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-container {
            width: 100%;
            max-width: 700px;
            background: var(--white);
            margin: 30px auto;
            padding: 30px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            border-top: 6px solid var(--primary-color);
        }

        /* Typography */
        h1.main-title {
            font-family: 'Gemunu Libre', sans-serif;
            color: var(--primary-color);
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 30px;
            text-transform: uppercase;
            position: relative;
        }

        h2.secondary-title {
            font-family: 'Noto Serif Sinhala', serif;
            font-size: 1.2rem;
            color: #444;
            background: #fdfdfd;
            padding: 10px 15px;
            border-radius: 6px;
            margin-top: 35px;
            margin-bottom: 15px;
            border-left: 5px solid var(--accent-color);
            font-weight: 700;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        label {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 1.05rem;
            margin-top: 20px;
        }

        /* Tooltip */
        .info-icon {
            margin-left: 8px;
            color: var(--accent-color);
            cursor: pointer;
            position: relative;
        }
        
        .tooltip-text {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 10;
            bottom: 125%; 
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            font-family: 'Noto Serif Sinhala', serif;
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        .info-icon:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Inputs */
        input[type="text"], select, textarea {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: 'Noto Serif Sinhala', serif;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
            background: #fafafa;
        }

        input[type="text"]:focus, select:focus, textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 4px rgba(255, 165, 0, 0.1);
            background: #fff;
        }

        /* Toggle Switch */
        .toggle-group {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .radio-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: 500;
            color: #555;
            margin-top: 0;
        }

        .radio-label input {
            margin-right: 8px;
            accent-color: var(--primary-color);
            transform: scale(1.2);
        }

        /* CTA Button */
        .btn-cta {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-light) 100%);
            color: var(--white);
            font-family: 'Gemunu Libre', sans-serif;
            font-size: 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .btn-cta:active {
            transform: scale(0.98);
        }

        /* Error Messages */
        .error-message {
            background-color: var(--error-bg);
            color: var(--error-color);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            display: none;
            font-size: 1rem;
            border: 1px solid #f5c6cb;
            font-weight: 600;
        }

        /* Results Section */
        .results-container {
            display: none;
            margin-top: 30px;
            animation: fadeIn 0.6s ease;
        }

        /* Main Score Card */
        .score-card {
            text-align: center;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 2px solid transparent;
        }
        .score-title {
            font-family: 'Gemunu Libre', sans-serif;
            font-size: 2rem;
            margin: 0;
            text-transform: uppercase;
        }
        .score-desc {
            font-size: 1rem;
            margin-top: 5px;
            font-weight: 600;
        }

        /* Score Themes */
        .theme-blue { background-color: #e7f1ff; color: #004085; border-color: #b8daff; }
        .theme-green { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
        .theme-yellow { background-color: #fff3cd; color: #856404; border-color: #ffeeba; }
        .theme-brown { background-color: #fce4e4; color: #7f3e3e; border-color: #f5c6c6; }
        .theme-red { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }

        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px dashed #e0e0e0;
            align-items: baseline;
        }

        .result-row:last-child {
            border-bottom: none;
        }

        .result-label {
            font-weight: 600;
            color: #555;
            flex: 1;
        }

        .result-value {
            flex: 1.5;
            text-align: right;
            font-weight: 500;
        }

        /* Status Colors */
        .text-green { color: var(--success-color) !important; font-weight: 700; }
        .text-red { color: var(--error-color) !important; font-weight: 700; }
        .text-default { color: #444 !important; font-weight: 500; }

        /* Footer */
        footer {
            margin-top: auto;
            margin-bottom: 3rem;
            text-align: center;
            color: #777;
            font-size: 0.9rem;
            font-family: 'Roboto', sans-serif;
            padding-top: 2rem;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            .main-container { padding: 20px; margin: 15px; width: auto; }
            h1.main-title { font-size: 2rem; }
            .result-row { flex-direction: column; text-align: left; }
            .result-value { text-align: left; margin-top: 5px; }
            .toggle-group { flex-direction: column; gap: 10px; }
        }
    </style>
</head>
<body>

    <div class="main-container">
        <h1 class="main-title">සුබ නම් තැබීම</h1>

        <label for="nameInput">ජන්මයාගේ නම <div class="info-icon"><i class="fas fa-info-circle"></i><span class="tooltip-text">මෙහි ජන්මයාගේ නිතර භාවිතා කරන නම ඇතුළත් කරන්න.</span></div></label>
        <input type="text" id="nameInput" placeholder="නම ඇතුළත් කරන්න (සිංහලෙන්)" autocomplete="off">

        <label for="motherName">මවගේ නම <div class="info-icon"><i class="fas fa-info-circle"></i><span class="tooltip-text">මෙහි මවගේ නිතර භාවිතා කරන තනි නමක් (First name) පමණක් ඇතුලත් කරන්න.</span></div></label>
        <input type="text" id="motherName" placeholder="මවගේ නම" autocomplete="off">

        <label for="fatherName">පියාගේ නම <div class="info-icon"><i class="fas fa-info-circle"></i><span class="tooltip-text">මෙහි පියාගේ නිතර භාවිතා කරන තනි නමක් (First name) පමණක් ඇතුලත් කරන්න.</span></div></label>
        <input type="text" id="fatherName" placeholder="පියාගේ නම" autocomplete="off">

        <label>වැඩිමහල් සහෝදර සහෝදරියන් සිටී නම්,</label>
        <div class="toggle-group">
            <label class="radio-label"><input type="radio" name="hasSibling" value="yes" onclick="toggleSiblingInput(true)"> ඔව්</label>
            <label class="radio-label"><input type="radio" name="hasSibling" value="no" checked onclick="toggleSiblingInput(false)"> නැත</label>
        </div>

        <div id="siblingSection" style="display:none;">
            <div class="toggle-group">
                <label class="radio-label"><input type="radio" name="siblingGender" value="brother" checked onclick="updateSiblingLabel()"> සහෝදරයා</label>
                <label class="radio-label"><input type="radio" name="siblingGender" value="sister" onclick="updateSiblingLabel()"> සහෝදරිය</label>
            </div>
            <label id="siblingLabel" for="siblingName">
                සහෝදරයාගේ නම 
                <div class="info-icon"><i class="fas fa-info-circle"></i><span class="tooltip-text">සහෝදරයෙක් හෝ සහෝදරියක් සිටී නම් ඔව් තෝරා විස්තර ඇතුලත් කරන්න.</span></div>
            </label>
            <input type="text" id="siblingName" placeholder="නම ඇතුළත් කරන්න" autocomplete="off">
        </div>

        <button class="btn-cta" id="findBtn">සොයන්න</button>
        
        <div id="errorDisplay" class="error-message"></div>

        <div id="results" class="results-container">
            
            <div id="finalScoreCard"></div>

            <div id="swaraSection" style="display:none;">
                <h2 class="secondary-title">ස්වර වේධ පරීක්ෂාව</h2>
                <div id="swaraContent"></div>
            </div>

            <div id="yoniSection" style="display:none;">
                <h2 class="secondary-title">අඔතල චක්‍ර පරීක්ෂාව</h2>
                <div id="yoniContent"></div>
            </div>

            <div id="siddhiSection" style="display:none;">
                <h2 class="secondary-title">සිද්ධි චක්‍ර පරීක්ෂාව</h2>
                <div id="siddhiContent"></div>
            </div>

            <div id="namaYoniSection" style="display:none;">
                <h2 class="secondary-title">නාම යෝනි පරීක්ෂාව</h2>
                <div id="namaYoniContent"></div>
            </div>

        </div>

    </div>

    <footer>
        &copy; <span id="year"></span> Suba Namak | Astro Jayamaga. All Rights Reserved.
    </footer>

    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        // UI Helpers
        function toggleSiblingInput(show) {
            document.getElementById('siblingSection').style.display = show ? 'block' : 'none';
        }

        function updateSiblingLabel() {
            const gender = document.querySelector('input[name="siblingGender"]:checked').value;
            const labelText = gender === 'brother' ? 'සහෝදරයාගේ නම' : 'සහෝදරියගේ නම';
            
            const tooltipHTML = '<div class="info-icon"><i class="fas fa-info-circle"></i><span class="tooltip-text">සහෝදරයෙක් හෝ සහෝදරියක් සිටී නම් ඔව් තෝරා විස්තර ඇතුලත් කරන්න.</span></div>';
            document.getElementById('siblingLabel').innerHTML = labelText + " " + tooltipHTML;
        }

        // ==========================================
        // DATA & LOGIC
        // ==========================================

        // --- Ashta Yoni Data ---
        const categories = {
            1: { name: "මුගටි", letters: ["අ", "ඔ", "ත", "ල"] }, 2: { name: "මහීෂ", letters: ["ආ", "ඕ", "ද", "ව"] }, 3: { name: "බකමුහුණු", letters: ["ස", "න", "ක", "ඉ"] }, 4: { name: "ව්‍යාඝ්‍ර", letters: ["හ", "ප", "ග", "ඊ"] }, 5: { name: "සර්ප", letters: ["උ", "ජ", "බ", "ළ"] }, 6: { name: "තුරඟ", letters: ["අං", "ම", "ට", "ඌ"] }, 7: { name: "කාක", letters: ["එ", "ඩ", "ය"] }, 8: { name: "මුව", letters: ["ඒ", "ණ", "ර"] }
        };
        const opposites = { 1: 5, 5: 1, 2: 6, 6: 2, 3: 7, 7: 3, 4: 8, 8: 4 };
        const matching = { 1: 4, 4: 1, 2: 5, 5: 2, 3: 6, 6: 3, 4: 7, 7: 4 };
        
        const letterVariations = {
             'අ': ['අ', 'ඇ', 'ඓ', 'ඖ', 'අඃ'],'ආ': ['ආ', 'ඈ'],'ඉ': ['ඉ'],'ඊ': ['ඊ'],'උ': ['උ'],'ඌ': ['ඌ', 'ඐ'],'එ': ['එ'],'ඒ': ['ඒ'],'ඔ': ['ඔ'],'ඕ': ['ඕ'],'ක': ['ක', 'ක්', 'කා', 'කැ', 'කෑ', 'කි', 'කී', 'කු', 'කූ', 'කෘ', 'කෲ', 'කෙ', 'කේ', 'කෛ', 'කො', 'කෝ', 'කෞ', 'කඃ', 'කං', 'කඞ', 'ක්‍ය', 'ක්‍ර', 'ඛ'],'ග': ['ග', 'ග්', 'ගා', 'ගැ', 'ගෑ', 'ගි', 'ගී', 'ගු', 'ගූ', 'ගෘ', 'ගෲ', 'ගෙ', 'ගේ', 'ගෛ', 'ගො', 'ගෝ', 'ගෞ', 'ගඃ', 'ගං', 'ගඞ', 'ග්‍ය', 'ග්‍ර', 'ඝ', 'ඟ'],'ජ': ['ජ', 'ජ්', 'ජා', 'ජැ', 'ජෑ', 'ජි', 'ජී', 'ජු', 'ජූ', 'ජෘ', 'ජෲ', 'ජෙ', 'ජේ', 'ජෛ', 'ජො', 'ජෝ', 'ජෞ', 'ජඃ', 'ජං', 'ජඣ', 'ජ්‍ය', 'ජ්‍ර', 'ඡ', 'ඦ', 'ඤ', 'ඥ'],'ඩ': ['ඩ', 'ඩ්', 'ඩා', 'ඩැ', 'ඩෑ', 'ඩි', 'ඩී', 'ඩු', 'ඩූ', 'ඩෘ', 'ඩෲ', 'ඩෙ', 'ඩේ', 'ඩෛ', 'ඩො', 'ඩෝ', 'ඩෞ', 'ඩඃ', 'ඩං', 'ඩඞ', 'ඩ්‍ය', 'ඩ්‍ර', 'ඪ', 'ඬ'],'ණ': ['ණ', 'ණ්', 'ණා', 'ණැ', 'ණෑ', 'ණි', 'ණී', 'ණු', 'ණූ', 'ණෘ', 'ණෲ', 'ණෙ', 'ණේ', 'ණෛ', 'ණො', 'ණෝ', 'ණෞ', 'ණඃ', 'ණං', 'ණඞ', 'ණ්‍ය', 'ණ්‍ර'],'ත': ['ත', 'ත්', 'තා', 'තැ', 'තෑ', 'ති', 'තී', 'තු', 'තූ', 'තෘ', 'තෲ', 'තෙ', 'තේ', 'තෛ', 'තො', 'තෝ', 'තෞ', 'තඃ', 'තං', 'තඞ', 'ත්‍ය', 'ත්‍ර', 'ථ'],'ද': ['ද', 'ද්', 'දා', 'දැ', 'දෑ', 'දි', 'දී', 'දු', 'දූ', 'දෘ', 'දෲ', 'දෙ', 'දේ', 'දෛ', 'දො', 'දෝ', 'දෞ', 'දඃ', 'දං', 'දඞ', 'ද්‍ය', 'ද්‍ර', 'ධ', 'ඳ'],'න': ['න', 'න්', 'නා', 'නැ', 'නෑ', 'නි', 'නී', 'නු', 'නූ', 'නෘ', 'නෲ', 'නෙ', 'නේ', 'නෛ', 'නො', 'නෝ', 'නෞ', 'නඃ', 'නං', 'නඞ', 'න්‍ය', 'න්‍ර'],'ප': ['ප', 'ප්', 'පා', 'පැ', 'පෑ', 'පි', 'පී', 'පු', 'පූ', 'පෘ', 'පෲ', 'පෙ', 'පේ', 'පෛ', 'පො', 'පෝ', 'පෞ', 'පඃ', 'පං', 'පඞ', 'ප්‍ය', 'ප්‍ර', 'ඵ'],'බ': ['බ', 'බ්', 'බා', 'බැ', 'බෑ', 'බි', 'බී', 'බු', 'බූ', 'බෘ', 'බෲ', 'බෙ', 'බේ', 'බෛ', 'බො', 'බෝ', 'බෞ', 'බඃ', 'බං', 'බඞ', 'බ්‍ය', 'බ්‍ර', 'භ', 'ඹ'],'ම': ['ම', 'ම්', 'මා', 'මැ', 'මෑ', 'මි', 'මී', 'මු', 'මූ', 'මෘ', 'මෲ', 'මෙ', 'මේ', 'මෛ', 'මො', 'මෝ', 'මෞ', 'මඃ', 'මං', 'මඞ', 'ම්‍ය', 'ම්‍ර'],'ය': ['ය', 'ය්', 'යා', 'යැ', 'යෑ', 'යි', 'යී', 'යු', 'යූ', 'යෘ', 'යෲ', 'යෙ', 'යේ', 'යෛ', 'යො', 'යෝ', 'යෞ', 'යඃ', 'යං', 'යඞ', 'ය්‍ය', 'ය්‍ර'],'ර': ['ර', 'ර්', 'රා', 'රැ', 'රෑ', 'රි', 'රී', 'රු', 'රූ', 'රෘ', 'රෲ', 'රෙ', 'රේ', 'රෛ', 'රො', 'රෝ', 'රෞ', 'රඃ', 'රං', 'රඞ', 'ර්‍ය', 'ර්‍ර', 'ඍ', 'ඎ'],'ල': ['ල', 'ල්', 'ලා', 'ලැ', 'ලෑ', 'ලි', 'ලී', 'ලු', 'ලූ', 'ලෘ', 'ලෲ', 'ලෙ', 'ලේ', 'ලෛ', 'ලො', 'ලෝ', 'ලෞ', 'ලඃ', 'ලං', 'ලඞ', 'ල්‍ය', 'ල්‍ර', 'ඏ', 'ළු'],'ව': ['ව', 'ව්', 'වා', 'වැ', 'වෑ', 'වි', 'වී', 'වු', 'වූ', 'වෘ', 'වෲ', 'වෙ', 'වේ', 'වෛ', 'වො', 'වෝ', 'වෞ', 'වඃ', 'වං', 'වඞ', 'ව්‍ය', 'ව්‍ර'],'ස': ['ස', 'ස්', 'සා', 'සැ', 'සෑ', 'සි', 'සී', 'සු', 'සූ', 'සෘ', 'සෲ', 'සෙ', 'සේ', 'සෛ', 'සො', 'සෝ', 'සෞ', 'සඃ', 'සං', 'සඞ', 'ස්‍ය', 'ස්‍ර', 'ශ', 'ෂ'],'හ': ['හ', 'හ්', 'හා', 'හැ', 'හෑ', 'හි', 'හී', 'හු', 'හූ', 'හෘ', 'හෲ', 'හෙ', 'හේ', 'හෛ', 'හො', 'හෝ', 'හෞ', 'හඃ', 'හං', 'හඞ', 'හ්‍ය', 'හ්‍ර'],'ළ': ['ළ', 'ළ්', 'ළා', 'ළැ', 'ළෑ', 'ළි', 'ළී', 'ළු', 'ළූ', 'ළෘ', 'ළෲ', 'ළෙ', 'ළේ', 'ළෛ', 'ළො', 'ළෝ', 'ළෞ', 'ළඃ', 'ළං', 'ළඞ', 'ළ්‍ය', 'ළ්‍ර'],'ට': ['ට', 'ට්', 'ටා', 'ටැ', 'ටෑ', 'ටි', 'ටී', 'ටු', 'ටූ', 'ටෘ', 'ටෲ', 'ටෙ', 'ටේ', 'ටෛ', 'ටො', 'ටෝ', 'ටෞ', 'ටඃ', 'ටං', 'ටඞ', 'ට්‍ය', 'ට්‍ර', 'ඨ'],'අං': ['අං']
        };

        // --- Swara Data ---
        const opposition = {
            'අ': 'උ', 'උ': 'අ',
            'ආ': 'ඌ', 'ඌ': 'ආ',
            'ඉ': ['එ', 'ඒ'], 'ඊ': ['ඔ', 'ඕ'],
            'එ': 'ඉ', 'ඒ': 'ඉ',
            'ඔ': 'ඊ', 'ඕ': 'ඊ',
        };

        const vowelGroups = {
            'එ': 'එ, ඒ', 'ඒ': 'එ, ඒ',
            'ඔ': 'ඔ, ඕ', 'ඕ': 'ඔ, ඕ'
        };

        // --- Siddhi Chakra Data ---
        const siddhiChakra = {
            'අ': ['1', 'A'], 'ක': ['1', 'A'], 'ථ': ['1', 'A'], 'හ': ['1', 'A'],
            'ඞ': ['1', 'B'], 'උ': ['1', 'B'], 'ප': ['1', 'B'],
            'ඣ': ['1', 'C'], 'ම': ['1', 'C'],
            'ඔ': ['1', 'D'], 'ඩ': ['1', 'D'], 'ව': ['1', 'D'],
            'ආ': ['2', 'A'], 'ඛ': ['2', 'A'], 'ද': ['2', 'A'], 'ළ': ['2', 'A'],
            'ඌ': ['2', 'B'], 'ච': ['2', 'B'], 'ඵ': ['2', 'B'],
            'ය': ['2', 'C'], 'ඤ': ['2', 'C'],
            'ඖ': ['2', 'D'], 'ශ': ['2', 'D'], 'ඪ': ['2', 'D'],
            'ඉ': ['3', 'A'], 'ග': ['3', 'A'], 'ධ': ['3', 'A'],
            'ඍ': ['3', 'B'], 'ඡ': ['3', 'B'], 'බ': ['3', 'B'],
            'එ': ['3', 'C'], 'ට': ['3', 'C'], 'ර': ['3', 'C'],
            'අං': ['3', 'D'], 'ණ': ['3', 'D'], 'ෂ': ['3', 'D'],
            'ඊ': ['4', 'A'], 'ඝ': ['4', 'A'], 'න': ['4', 'A'],
            'ඎ': ['4', 'B'], 'ජ': ['4', 'B'], 'භ': ['4', 'B'],
            'ඓ': ['4', 'C'], 'ඨ': ['4', 'C'], 'ල': ['4', 'C'],
            'අඃ': ['4', 'D'], 'ත': ['4', 'D'], 'ස': ['4', 'D'],
        };
        const counts = ['සිද්ධ', 'සාධ්‍ය', 'සුසිද්ධ', 'අරි'];
        const squareOrder = ['1', '2', '3', '4'];
        const subBoxOrder = ['A', 'B', 'C', 'D'];

        // Siddhi Result Mapping (Score Pct for Backend Calculation)
        const siddhiResultMap = {
            'සිද්ධ-සිද්ධ': { t: 'සුභයි', c: 'text-green', score: 80 },
            'සිද්ධ-සාධ්‍ය': { t: 'සාමාන්‍යයි', c: 'text-neutral', score: 50 },
            'සිද්ධ-සුසිද්ධ': { t: 'ඉතා සුභයි', c: 'text-green', score: 100 },
            'සිද්ධ-අරි': { t: 'අසුභයි', c: 'text-red', score: 0 },
            
            'සාධ්‍ය-සිද්ධ': { t: 'සාමාන්‍යයි', c: 'text-neutral', score: 50 },
            'සාධ්‍ය-සාධ්‍ය': { t: 'අසුභයි', c: 'text-red', score: 0 },
            'සාධ්‍ය-සුසිද්ධ': { t: 'සාමාන්‍යයි', c: 'text-neutral', score: 50 },
            'සාධ්‍ය-අරි': { t: 'අසුභයි', c: 'text-red', score: 0 },
            
            'සුසිද්ධ-සිද්ධ': { t: 'ඉතා සුභයි', c: 'text-green', score: 100 },
            'සුසිද්ධ-සාධ්‍ය': { t: 'සාමාන්‍යයි', c: 'text-neutral', score: 50 },
            'සුසිද්ධ-සුසිද්ධ': { t: 'ඉතා සුභයි', c: 'text-green', score: 100 },
            'සුසිද්ධ-අරි': { t: 'අසුභයි', c: 'text-red', score: 0 },
            
            'අරි-සිද්ධ': { t: 'අසුභයි', c: 'text-red', score: 0 },
            'අරි-සාධ්‍ය': { t: 'අසුභයි', c: 'text-red', score: 0 },
            'අරි-සුසිද්ධ': { t: 'අසුභයි', c: 'text-red', score: 0 },
            'අරි-අරි': { t: 'අසුභයි', c: 'text-red', score: 0 }
        };

        // --- Nama Yoni Data ---
        const baseValues = {
            'උ': 7, 'ඌ': 7, 'ර්': 7, 'ත්': 7, 'ථ්': 7, 'ච්': 7, 'ඡ්': 7, 'ජ්': 7, 'ඣ්': 7, 'ඦ්': 7,
            'අ': 6, 'ආ': 6, 'ඇ': 6, 'ඈ': 6, 'එ': 6, 'ඒ': 6, 'ඓ': 6, 
            'ක්': 6, 'ඛ්': 6, 'ද්': 6, 'ධ්': 6, 'ඳ්': 6, 'බ්': 6, 'භ්': 6, 'ඹ්': 6,
            'ඉ': 4, 'ඊ': 4, 'න්': 4, 'ණ්': 4, 'ප්': 4, 'ඵ්': 4, 'ය්': 4, 'ව්': 4,
            'ඔ': 3, 'ඕ': 3, 'ඖ': 3, 
            'ග්': 3, 'ඝ්': 3, 'ඩ්': 3, 'ඪ්': 3, 'ඬ්': 3, 'ම්': 3, 'ස්': 3, 'ෂ්': 3, 'ශ්': 3,
            'ට්': 2, 'ඨ්': 2, 'ල්': 2, 'ළ්': 2, 'හ්': 2, 'ඤ්': 2, 'ඥ්': 2, 'ඞ්': 2, 'ඞ': 2, 'ං': 2, 'ඃ': 2
        };

        const pillaValues = {
            'ා': 6, 'ැ': 6, 'ෑ': 6, 'ි': 4, 'ී': 4, 'ු': 7, 'ූ': 7,
            'ෘ': 14, 'ෲ': 14, 'ෙ': 6, 'ේ': 6, 'ෛ': 6, 'ො': 3, 'ෝ': 3, 'ෞ': 3, '්': 0
        };

        const namaYoniList = {
            1: "නකුල් (මුගටි)", 2: "මියු (මීමා)", 3: "මහවත් (බකමූණා)", 4: "වග (ව්‍යාඝ්‍ර)",
            5: "සපුනා (සර්ප)", 6: "තුරඟ (අශ්ව)", 7: "බිලිපුටු (කාක)", 8: "සරඟ (මුවා)"
        };

        // --- Shared Helper Functions ---
        function getBaseLetter(letter) {
            for (const base in letterVariations) {
                if (letterVariations[base].includes(letter)) return base;
            }
            return letter;
        }

        function getCategory(letter) {
            const baseLetter = getBaseLetter(letter);
            for (const id in categories) {
                if (categories[id].letters.includes(baseLetter)) {
                    return { id: parseInt(id), name: categories[id].name };
                }
            }
            return null;
        }

        function getVowelSound(name) {
            const trimmedName = name.trim();
            if (!trimmedName) return null;

            const standaloneVowels = ['අ', 'ආ', 'ඇ', 'ඈ', 'ඉ', 'ඊ', 'උ', 'ඌ', 'එ', 'ඒ', 'ඔ', 'ඕ', 'ඓ', 'ඖ'];
            const piliMap = {
                'ා': 'ආ', 'ැ': 'ඇ', 'ෑ': 'ඈ', 'ි': 'ඉ', 'ී': 'ඊ',
                'ු': 'උ', 'ූ': 'ඌ', 'ෙ': 'එ', 'ේ': 'ඒ', 'ො': 'ඔ', 'ෝ': 'ඕ',
                'ෛ': 'ඓ', 'ෞ': 'ඖ', 'ෘ': 'උ', 'ෲ': 'ඌ'
            };

            const char1 = trimmedName.charAt(0);
            if (standaloneVowels.includes(char1)) return char1;

            const allConsonants = "කඛගඝඞඟචඡජඣඤඥඦටඨඩඪඬණතථදධඳනඹපඵබභමයරලවශෂසහළෆ";
            if (!allConsonants.includes(char1)) return null;

            let hasSeenHal = false;
            for (let i = 1; i < trimmedName.length; i++) {
                const char = trimmedName.charAt(i);
                if (piliMap[char]) return piliMap[char];
                else if (char === '්') { hasSeenHal = true; continue; }
                else if (char === '\u200D') continue;
                else if (allConsonants.includes(char)) {
                    if (!hasSeenHal) return 'අ';
                    hasSeenHal = false;
                } else continue;
            }
            return 'අ';
        }

        // --- Swara Logic ---
        function checkSwara(v1, v2) {
            const relevantVowels = ['අ', 'ආ', 'ඉ', 'ඊ', 'උ', 'ඌ', 'එ', 'ඒ', 'ඔ', 'ඕ'];
            if (!v1 || !v2 || !relevantVowels.includes(v1) || !relevantVowels.includes(v2)) {
                return { t: "සුභයි", d: `ස්වර වේධ නොවේ (${v1} | ${v2})`, c: "text-green", scorePct: 100 };
            }
            if ((Array.isArray(opposition[v1]) && opposition[v1].includes(v2)) ||
                (Array.isArray(opposition[v2]) && opposition[v2].includes(v1)) ||
                (opposition[v1] === v2)) {
                return { t: "අසුභයි", d: `ස්වර වේධ වේ (${v1} | ${v2})`, c: "text-red", scorePct: 0 };
            } 
            return { t: "සුභයි", d: `ස්වර වේධ නොවේ (${v1} | ${v2})`, c: "text-green", scorePct: 100 };
        }

        // --- Ashta Yoni Logic ---
        function checkYoni(cat1, cat2) {
            if (!cat1 || !cat2) return { status: "සුභයි", desc: "බලපෑමක් නොමැත", yoniText: "", c: "text-green", scorePct: 75 };
            if (cat1.id === cat2.id) return { status: "ඉතා සුභයි", desc: "එකම යෝනියට අයත් වේ.", yoniText: `${cat1.name} යෝනිය -`, c: "text-green", scorePct: 100 };
            if (matching[cat1.id] === cat2.id) return { status: "ඉතා සුභයි", desc: "මිතුරු", yoniText: `${cat2.name} යෝනිය -`, c: "text-green", scorePct: 100 };
            if (opposites[cat1.id] === cat2.id) return { status: "අසුභයි", desc: "සතුරු", yoniText: `${cat2.name} යෝනිය -`, c: "text-red", scorePct: 0 };
            return { status: "සුභයි", desc: "උදාසීන", yoniText: `${cat2.name} යෝනිය -`, c: "text-green", scorePct: 75 };
        }

        // --- Siddhi Chakra Logic ---
        function getCount(start, end, orderArray) {
            const startIndex = orderArray.indexOf(start);
            const endIndex = orderArray.indexOf(end);
            if (startIndex === -1 || endIndex === -1) return null;
            let countIndex = (endIndex >= startIndex) ? (endIndex - startIndex) : ((orderArray.length - startIndex) + endIndex);
            return counts[countIndex];
        }

        function getSiddhiResult(parentChar, babyChar) {
            const posP = siddhiChakra[parentChar];
            const posB = siddhiChakra[babyChar];
            if (!posP || !posB) return null;
            
            const firstResult = getCount(posP[0], posB[0], squareOrder);
            const secondResult = getCount(posP[1], posB[1], subBoxOrder);
            
            if (firstResult && secondResult) {
                const key = `${firstResult}-${secondResult}`;
                return { key: key, ...siddhiResultMap[key] };
            }
            return null;
        }

        // --- Nama Yoni Logic ---
        function calculateNameValue(name) {
            // Only first word
            let processingName = name.trim().split(/\s+/)[0]; 
            let totalValue = 0;
            let breakdown = [];
            
            for (let i = 0; i < processingName.length; i++) {
                let char = processingName[i];
                let nextChar = processingName[i + 1];
                let charValue = 0;
                let baseCharKey = char + '්';
                
                if (baseValues[char]) {
                    charValue = baseValues[char];
                    breakdown.push(charValue);
                    totalValue += charValue;
                } else if (baseValues[baseCharKey]) {
                    let consonantVal = baseValues[baseCharKey];
                    if (nextChar && pillaValues.hasOwnProperty(nextChar)) {
                        let pillaVal = pillaValues[nextChar];
                        charValue = (pillaVal === 0) ? consonantVal : consonantVal + pillaVal;
                        i++; 
                        if(nextChar === '්' && processingName[i+1] === '\u200D') {
                            if(processingName[i+2] === 'ර') { /* Rakaransaya logic included in base calc */ }
                        }
                    } else {
                        charValue = consonantVal + 6;
                    }
                    breakdown.push(charValue);
                    totalValue += charValue;
                } else {
                     if(char === '්‍ර') { breakdown.push(13); totalValue += 13; } 
                     else if (char === '්‍ය') { breakdown.push(10); totalValue += 10; }
                }
            }
            return { total: totalValue, list: breakdown };
        }

        function calculateYoniIndex(total) {
            let remainder = total % 8;
            return (remainder === 0) ? 8 : remainder;
        }

        function getNamaYoniRelationship(yoni1, yoni2) {
            if (yoni1 === yoni2) return { t: "ඉතා සුභයි", c: "text-green", scorePct: 100 }; // Same Yoni

            const enemies = [[1,5], [2,6], [3,7], [4,8]];
            for (let pair of enemies) {
                if ((pair[0] === yoni1 && pair[1] === yoni2) || (pair[0] === yoni2 && pair[1] === yoni1)) {
                    return { t: "අසුභයි", c: "text-red", scorePct: 0 };
                }
            }
            
            // Friendly Check
            let fwd = yoni1 + 3; if (fwd > 8) fwd = fwd - 8;
            let bwd = yoni1 - 3; if (bwd < 1) bwd = bwd + 8;
            
            if (yoni2 === fwd || yoni2 === bwd) return { t: "ඉතා සුභයි", c: "text-green", scorePct: 100 }; 
            
            let fwd2 = yoni2 + 3; if (fwd2 > 8) fwd2 = fwd2 - 8;
            let bwd2 = yoni2 - 3; if (bwd2 < 1) bwd2 = bwd2 + 8;
            if (yoni1 === fwd2 || yoni1 === bwd2) return { t: "ඉතා සුභයි", c: "text-green", scorePct: 100 };

            return { t: "සුභයි", c: "text-green", scorePct: 75 }; // Neutral
        }

        // --- Main Event Listener ---
        document.getElementById('findBtn').addEventListener('click', function() {
            const nameInput = document.getElementById('nameInput').value.trim();
            const motherInput = document.getElementById('motherName').value.trim();
            const fatherInput = document.getElementById('fatherName').value.trim();
            const hasSib = document.querySelector('input[name="hasSibling"]:checked').value === 'yes';
            const siblingInput = hasSib ? document.getElementById('siblingName').value.trim() : "";
            
            const errorDiv = document.getElementById('errorDisplay');
            const resultsDiv = document.getElementById('results');
            
            errorDiv.style.display = 'none';
            resultsDiv.style.display = 'none';
            document.getElementById('finalScoreCard').innerHTML = ''; // Clear previous score

            // --- Validation ---
            const validateName = (name, maxWords, minLen, maxLen, label) => {
                if (!name) return true;
                const words = name.split(/\s+/);
                if (words.length > maxWords) return `${label}: වචන ${maxWords} කට වඩා වැඩි නොවිය යුතුය.`;
                for (let word of words) {
                    if (word.length < minLen || word.length > maxLen) return `${label}: එක් වචනයක් සඳහා අකුරු ${minLen} ත් ${maxLen} ත් අතර ප්‍රමාණයක් තිබිය යුතුය.`;
                }
                return true;
            };

            if (!nameInput) { errorDiv.innerText = "කරුණාකර ජන්මයාගේ නම ඇතුළත් කරන්න."; errorDiv.style.display = 'block'; return; }
            if (validateName(nameInput, 3, 2, 12, "ජන්මයාගේ නම") !== true) { errorDiv.innerText = validateName(nameInput, 3, 2, 12, "ජන්මයාගේ නම"); errorDiv.style.display = 'block'; return; }
            if (validateName(motherInput, 2, 2, 12, "මවගේ නම") !== true) { errorDiv.innerText = validateName(motherInput, 2, 2, 12, "මවගේ නම"); errorDiv.style.display = 'block'; return; }
            if (validateName(fatherInput, 2, 2, 12, "පියාගේ නම") !== true) { errorDiv.innerText = validateName(fatherInput, 2, 2, 12, "පියාගේ නම"); errorDiv.style.display = 'block'; return; }
            if (hasSib && validateName(siblingInput, 2, 2, 12, "සහෝදරයාගේ/සහෝදරියගේ නම") !== true) { errorDiv.innerText = validateName(siblingInput, 2, 2, 12, "සහෝදරයාගේ/සහෝදරියගේ නම"); errorDiv.style.display = 'block'; return; }

            // --- Core Calculation Prep ---
            const mainWords = nameInput.split(/\s+/);
            const babyFirstChar = mainWords[0].charAt(0);
            const mainVowel = getVowelSound(mainWords[0]);
            const mainCat = getCategory(babyFirstChar);
            const babyNamaData = calculateNameValue(mainWords[0]);
            const babyYoniIndex = calculateYoniIndex(babyNamaData.total);
            const babyYoniName = namaYoniList[babyYoniIndex];

            // Variables for Total Score Calculation
            let totalScore = 0;
            let hasMother = motherInput.length > 0;
            let hasFather = fatherInput.length > 0;
            let hasSibi = hasSib && siblingInput.length > 0;
            
            // Determine Scoring Scenario
            // Scenario 1: M + F + S
            // Scenario 2: M + F (No S)
            // Scenario 3: (M or F) + S
            // Scenario 4: (M or F) only - falls into split logic if S missing, or handled by weight
            
            // Defining Weights per input based on scenario logic provided
            // Section Totals: Swara(30), Ashta(25), Siddhi(20), Nama(25)
            
            let wSwara = {}, wAshta = {}, wSiddhi = {}, wNama = {};
            
            if (hasSibi) {
                // Sibling Exists
                if(hasMother && hasFather) {
                    // Scenario: M, F, S
                    wSwara = { m: 12, f: 12, s: 6 };
                    wAshta = { m: 10, f: 10, s: 5 };
                    wSiddhi = { m: 8, f: 8, s: 4 };
                    wNama = { m: 10, f: 10, s: 5 };
                } else {
                    // Scenario: (M or F), S
                    wSwara = { p: 20, s: 10 };
                    wAshta = { p: 15, s: 10 };
                    wSiddhi = { p: 12, s: 8 };
                    wNama = { p: 15, s: 10 };
                }
            } else {
                // No Sibling (Split logic)
                // Scenario: M, F or Single Parent (if single, max score drops, but prompt implies 'divide equally')
                // Assuming if M and F both exist, split. If only one exists, we can't score 100%. 
                // But Prompt says: "If the user didn't add සහෝදරයා's input name, divide the results equally for mother and father."
                // This implies M and F.
                wSwara = { m: 15, f: 15 };
                wAshta = { m: 12.5, f: 12.5 };
                wSiddhi = { m: 10, f: 10 };
                wNama = { m: 12.5, f: 12.5 };
            }

            // Calculation Helper
            const calcSectionScore = (resultPct, weight) => {
                if(resultPct === undefined || weight === undefined) return 0;
                return (resultPct / 100) * weight;
            };

            // 1. Swara Output & Scoring
            let swaraHTML = `<div class="result-row"><span class="result-label">ජන්මයා</span> <span class="result-value text-default">[${mainVowel || '-'}] ස්වරය</span></div>`;
            const processSwaraRel = (n, label, type) => {
                if (n) {
                    const v = getVowelSound(n);
                    const r = checkSwara(mainVowel, v);
                    swaraHTML += `<div class="result-row"><span class="result-label">${label}</span> <span class="result-value ${r.c}">${r.t} <br><small style="font-weight:400; color:#666;">${r.d}</small></span></div>`;
                    
                    // Score
                    let weight = 0;
                    if (hasSibi && (hasMother && hasFather)) { weight = (type==='s')? wSwara.s : (type==='m'?wSwara.m:wSwara.f); }
                    else if (hasSibi && !(hasMother && hasFather)) { weight = (type==='s')? wSwara.s : wSwara.p; }
                    else { weight = wSwara.m; /* Equal split uses same value for M/F */ }
                    
                    totalScore += calcSectionScore(r.scorePct, weight);
                }
            };
            processSwaraRel(motherInput, "මව", 'm');
            processSwaraRel(fatherInput, "පියා", 'f');
            if(hasSibi) processSwaraRel(siblingInput, document.querySelector('input[name="siblingGender"]:checked').nextSibling.textContent.trim().replace('ට', ''), 's');
            document.getElementById('swaraContent').innerHTML = swaraHTML;
            document.getElementById('swaraSection').style.display = 'block';

            // 2. Ashta Yoni Output & Scoring
            let yoniHTML = "";
            if(mainCat) {
                yoniHTML += `<div class="result-row"><span class="result-label">ජන්මයා</span> <span class="result-value text-default">${mainCat.name} යෝනිය</span></div>`;
                const processYoniRel = (n, label, type) => {
                    if (n) {
                        const relCat = getCategory(n.charAt(0));
                        const r = checkYoni(mainCat, relCat);
                        const detailText = r.yoniText ? `${r.yoniText} ${r.desc}` : r.desc;
                        yoniHTML += `<div class="result-row"><span class="result-label">${label}</span> <span class="result-value ${r.c}">${r.status} <br><small style="font-weight:400; color:#666;">${detailText}</small></span></div>`;
                        
                        // Score
                        let weight = 0;
                        if (hasSibi && (hasMother && hasFather)) { weight = (type==='s')? wAshta.s : (type==='m'?wAshta.m:wAshta.f); }
                        else if (hasSibi && !(hasMother && hasFather)) { weight = (type==='s')? wAshta.s : wAshta.p; }
                        else { weight = wAshta.m; }
                        
                        totalScore += calcSectionScore(r.scorePct, weight);
                    }
                };
                processYoniRel(motherInput, "මව", 'm');
                processYoniRel(fatherInput, "පියා", 'f');
                if(hasSibi) processYoniRel(siblingInput, document.querySelector('input[name="siblingGender"]:checked').nextSibling.textContent.trim().replace('ට', ''), 's');
                document.getElementById('yoniContent').innerHTML = yoniHTML;
            } else {
                document.getElementById('yoniContent').innerHTML = `<div class="result-row"><span class="result-label">ජන්මයා</span> <span class="result-value text-default"> හඳුනාගත නොහැක </span></div>`;
            }
            document.getElementById('yoniSection').style.display = 'block';

            // 3. Siddhi Chakra Output & Scoring
            let siddhiHTML = "";
            const processSiddhiRel = (n, label, type) => {
                if (n) {
                    const nChar = n.trim().charAt(0);
                    const res = getSiddhiResult(nChar, babyFirstChar);
                    if(res) {
                         siddhiHTML += `<div class="result-row"><span class="result-label">${label} - <span class="${res.c}">${res.t}</span></span> <span class="result-value text-default">${res.key}</span></div>`;
                         
                         // Score
                        let weight = 0;
                        if (hasSibi && (hasMother && hasFather)) { weight = (type==='s')? wSiddhi.s : (type==='m'?wSiddhi.m:wSiddhi.f); }
                        else if (hasSibi && !(hasMother && hasFather)) { weight = (type==='s')? wSiddhi.s : wSiddhi.p; }
                        else { weight = wSiddhi.m; }
                        
                        totalScore += calcSectionScore(res.score, weight);

                    } else {
                         siddhiHTML += `<div class="result-row"><span class="result-label">${label}</span> <span class="result-value text-default">ගණනය කල නොහැක</span></div>`;
                    }
                }
            };
            processSiddhiRel(motherInput, "මව", 'm');
            processSiddhiRel(fatherInput, "පියා", 'f');
            if(hasSibi) processSiddhiRel(siblingInput, document.querySelector('input[name="siblingGender"]:checked').nextSibling.textContent.trim().replace('ට', ''), 's');
            document.getElementById('siddhiContent').innerHTML = siddhiHTML;
            document.getElementById('siddhiSection').style.display = 'block';

            // 4. Nama Yoni Output & Scoring
            let namaYoniHTML = "";
            // Baby Line
            namaYoniHTML += `<div class="result-row"><span class="result-label">ජන්මයා</span> <span class="result-value text-default">නාම යෝනිය - ${babyYoniName} <br><small style="font-weight:400; color:#666;">${babyNamaData.list.join(' + ')} = ${babyNamaData.total}</small></span></div>`;

            const processNamaYoniRel = (n, label, type) => {
                if (n) {
                    const relData = calculateNameValue(n.trim().split(/\s+/)[0]);
                    const relYoniIndex = calculateYoniIndex(relData.total);
                    const relYoniName = namaYoniList[relYoniIndex];
                    const rel = getNamaYoniRelationship(babyYoniIndex, relYoniIndex); 
                    
                    namaYoniHTML += `<div class="result-row"><span class="result-label">${label} - <span class="${rel.c}">${rel.t}</span></span> <span class="result-value text-default">නාම යෝනිය - ${relYoniName} <br><small style="font-weight:400; color:#666;">${relData.list.join(' + ')} = ${relData.total}</small></span></div>`;

                     // Score
                    let weight = 0;
                    if (hasSibi && (hasMother && hasFather)) { weight = (type==='s')? wNama.s : (type==='m'?wNama.m:wNama.f); }
                    else if (hasSibi && !(hasMother && hasFather)) { weight = (type==='s')? wNama.s : wNama.p; }
                    else { weight = wNama.m; }
                    
                    totalScore += calcSectionScore(rel.scorePct, weight);
                }
            };
            processNamaYoniRel(motherInput, "මව", 'm');
            processNamaYoniRel(fatherInput, "පියා", 'f');
            if(hasSibi) processNamaYoniRel(siblingInput, document.querySelector('input[name="siblingGender"]:checked').nextSibling.textContent.trim().replace('ට', ''), 's');

            document.getElementById('namaYoniContent').innerHTML = namaYoniHTML;
            document.getElementById('namaYoniSection').style.display = 'block';

            // --- Generate Final Score Card ---
            if(hasMother || hasFather) { // Only show score if relative provided
                let scoreTitle = "";
                let scoreDesc = "";
                let themeClass = "";

                if (totalScore >= 80) {
                    scoreTitle = "ඉතා සුභයි ⭐";
                    scoreDesc = "මෙම නම ජන්මයාට ඉතා යහපත් වේ.";
                    themeClass = "theme-blue";
                } else if (totalScore >= 60) {
                    scoreTitle = "සුභයි ✅";
                    scoreDesc = "මෙම නම ජන්මයාට සුදුසු වේ.";
                    themeClass = "theme-green";
                } else if (totalScore >= 40) {
                    scoreTitle = "මධ්‍යමයි ➡️";
                    scoreDesc = "මෙම නම ජන්මයාට මධ්‍යස්ථ ඵල ලබා දෙයි.";
                    themeClass = "theme-yellow";
                } else if (totalScore >= 20) {
                    scoreTitle = "අසුභයි ⭕";
                    scoreDesc = "මෙම නම ජන්මයාට අසුබ ඵල ලබා දිය හැක.";
                    themeClass = "theme-brown";
                } else {
                    scoreTitle = "ඉතා අසුභයි ❌";
                    scoreDesc = "මෙම නම ජන්මයාට ඉතා අසුබ බැවින් භාවිතා නොකිරීම මැනවි.";
                    themeClass = "theme-red";
                }

                document.getElementById('finalScoreCard').innerHTML = `
                    <div class="score-card ${themeClass}">
                        <h3 class="score-title">${scoreTitle}</h3>
                    </div>
                `;
            }

            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
